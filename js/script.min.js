(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-62008716-1', 'auto');
ga('send', 'pageview');

//---------------------------------------------------------------------------------------
// navigation menu

$('div.overlay').addClass('close');

function openMenu(menu) {
	$(menu).removeClass('close');
	$(menu).addClass('open');
    $('#menu').hide();
}

function closeMenu(menu) {
	$(menu).removeClass('open');
	$(menu).addClass('close');
	$('.overlay-open').show();
    $('#menu').show();
}

$('.overlay-open').click(function() {
	$('.overlay-open').hide();
    var element = $(this);
    var target = element.attr('data-target');
	openMenu(target);
    sendCharacterEvent(element);
	return false;
});
$('.overlay-close').click(function() {
    var overlay = $(this).closest('.overlay');
	closeMenu(overlay);
	return false;
}); 
$('.overlay-scale nav a').click(function() {
	var parent = $(this).parent('.overlay');
	closeMenu(parent);
});
$('.overlay-scale nav a.scroll').click(function() {
	var overlay = $(this).closest('.overlay');
	closeMenu(overlay);
	scrollTo(this.hash);
	return false;
});
$('#menu a.scroll').click(function() {
	scrollTo(this.hash);
	return false;
});

//---------------------------------------------------------------------------------------
// scroll effect

var scrollSpeed = 500;

function scrollTo(element){
    $('html, body').animate({
        scrollTop: $(element).offset().top
    }, scrollSpeed);
}

//---------------------------------------------------------------------------------------
// google analytics

$('.analytics-event').on('click', function() {
    var label = $(this).attr('data-label');
    var value = $(this).attr('data-value');
    ga('send', 'event', 'button', 'click', label, value);
});

function sendCharacterEvent(element){
    if(element.hasClass('personaje')){
        var label = 'personaje';
        var personaje = element.attr('data-character');
        ga('send', 'event', 'button', 'click', label, personaje);
    }
}

// @koala-prepend "analytics.js"
// @koala-prepend "main.js"
